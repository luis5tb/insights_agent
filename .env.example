# =============================================================================
# Insights Agent Configuration
# Copy this file to .env and fill in the values
# =============================================================================

# -----------------------------------------------------------------------------
# Google AI / Gemini Configuration
# -----------------------------------------------------------------------------
# Set to FALSE to use Google AI Studio, TRUE for Vertex AI
GOOGLE_GENAI_USE_VERTEXAI=FALSE

# Google AI Studio API Key (required if GOOGLE_GENAI_USE_VERTEXAI=FALSE)
# Get your API key from: https://aistudio.google.com/apikey
GOOGLE_API_KEY=your_google_api_key_here

# Vertex AI Configuration (required if GOOGLE_GENAI_USE_VERTEXAI=TRUE)
GOOGLE_CLOUD_PROJECT=your_gcp_project_id
GOOGLE_CLOUD_LOCATION=us-central1

# Model to use (default: gemini-2.5-flash)
GEMINI_MODEL=gemini-2.5-flash

# -----------------------------------------------------------------------------
# Red Hat SSO / OAuth 2.0 Configuration
# -----------------------------------------------------------------------------
# Red Hat SSO (sso.redhat.com) OAuth settings
RED_HAT_SSO_ISSUER=https://sso.redhat.com/auth/realms/redhat-external
RED_HAT_SSO_CLIENT_ID=your_client_id
RED_HAT_SSO_CLIENT_SECRET=your_client_secret
RED_HAT_SSO_REDIRECT_URI=http://localhost:8000/oauth/callback

# JWKS endpoint for token validation
RED_HAT_SSO_JWKS_URI=https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/certs

# -----------------------------------------------------------------------------
# Red Hat Insights MCP Server Configuration
# -----------------------------------------------------------------------------
# The MCP server provides tools to access Red Hat Insights APIs.
# It runs as a sidecar container and authenticates with console.redhat.com
# using Lightspeed service account credentials.
#
# To obtain Lightspeed credentials:
#   1. Go to console.redhat.com
#   2. Navigate to Settings -> Integrations -> Red Hat Lightspeed
#   3. Create a service account
#   4. Copy the Client ID and Client Secret
#
# These credentials allow the MCP server to access:
#   - Advisor (recommendations)
#   - Inventory (registered systems)
#   - Vulnerability (CVE data)
#   - Remediations (playbooks)
#   - Patch (system updates)
#   - Image Builder (custom images)
#
LIGHTSPEED_CLIENT_ID=your_lightspeed_client_id
LIGHTSPEED_CLIENT_SECRET=your_lightspeed_client_secret

# MCP server transport mode:
#   - stdio: Agent spawns MCP server as subprocess (development)
#   - http: Agent connects to MCP server via HTTP (production, recommended)
#   - sse: Agent uses Server-Sent Events for streaming
MCP_TRANSPORT_MODE=http

# MCP server URL (for http/sse modes)
# In container deployments, the MCP server runs as a sidecar on localhost:8080
MCP_SERVER_URL=http://localhost:8080

# Enable read-only mode for MCP tools (recommended for production)
# When true, write operations (create remediation, etc.) are disabled
MCP_READ_ONLY=true

# -----------------------------------------------------------------------------
# Agent Configuration
# -----------------------------------------------------------------------------
# Agent provider URL (used in AgentCard and for DCR validation)
AGENT_PROVIDER_URL=https://your-agent-domain.com

# Agent name and description
AGENT_NAME=insights_agent
AGENT_DESCRIPTION=Red Hat Insights Agent for infrastructure management

# Server configuration
AGENT_HOST=0.0.0.0
AGENT_PORT=8000

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Database URL for storing client registrations, usage data, etc.
# SQLite for development, PostgreSQL recommended for production
DATABASE_URL=sqlite+aiosqlite:///./insights_agent.db

# For PostgreSQL in production:
# DATABASE_URL=postgresql+asyncpg://user:password@localhost:5432/insights_agent

# -----------------------------------------------------------------------------
# Redis Configuration (for rate limiting)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# Google Cloud Service Control (for usage reporting)
# -----------------------------------------------------------------------------
# Service name registered with Google Cloud Marketplace
SERVICE_CONTROL_SERVICE_NAME=your-service-name.endpoints.your-project.cloud.goog

# Path to service account key file (for local development)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Default rate limits (can be overridden per subscription tier)
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_TOKENS_PER_DAY=100000

# -----------------------------------------------------------------------------
# Usage Reporting Configuration
# -----------------------------------------------------------------------------
# How often to report usage to Google Cloud (in seconds)
USAGE_REPORT_INTERVAL_SECONDS=3600

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Development/Debug Settings
# -----------------------------------------------------------------------------
# Enable debug mode (DO NOT use in production)
DEBUG=false

# Skip JWT validation (for local development only)
SKIP_JWT_VALIDATION=false
