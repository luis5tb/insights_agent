# Red Hat Lightspeed Agent for Google Cloud - Secrets Template
#
# Sensitive credentials for the Lightspeed Agent.
# Copy this file and fill in your actual credentials.
#
# IMPORTANT: Do not commit files with real credentials to version control!
#
# Usage:
#   1. Copy this template:
#      cp deploy/podman/lightspeed-agent-secret.yaml deploy/podman/my-secrets.yaml
#
#   2. Edit my-secrets.yaml with your actual credentials
#
#   3. Deploy with podman (pass secret file first, then pod file):
#      podman kube play deploy/podman/my-secrets.yaml
#      podman kube play \
#        --configmap deploy/podman/lightspeed-agent-configmap.yaml \
#        deploy/podman/lightspeed-agent-pod.yaml
#
# For Kubernetes:
#   kubectl apply -f deploy/podman/my-secrets.yaml
#   kubectl apply -f deploy/podman/lightspeed-agent-configmap.yaml
#   kubectl apply -f deploy/podman/lightspeed-agent-pod.yaml
#
# Note: Using 'stringData' for plain text values (no base64 encoding needed).
# Requires Podman 4.4+ or Kubernetes.
#
apiVersion: v1
kind: Secret
metadata:
  name: lightspeed-agent-secrets
type: Opaque
stringData:
  # Google AI API Key (required if using Google AI Studio)
  # Get your API key from: https://aistudio.google.com/apikey
  GOOGLE_API_KEY: "your-google-api-key"

  # Google Cloud Project (required if using Vertex AI)
  # Leave empty if using Google AI Studio
  GOOGLE_CLOUD_PROJECT: ""

  # Red Hat SSO OAuth Credentials
  # Register your application with Red Hat SSO to obtain these
  RED_HAT_SSO_CLIENT_ID: "your-sso-client-id"
  RED_HAT_SSO_CLIENT_SECRET: "your-sso-client-secret"

  # Red Hat Insights Lightspeed Credentials (optional)
  # Obtain from console.redhat.com -> Settings -> Integrations -> Red Hat Lightspeed
  # If not set, the agent forwards the caller's JWT token to the MCP server instead.
  # Remove these lines entirely if you want to use JWT pass-through.
  LIGHTSPEED_CLIENT_ID: "your-lightspeed-client-id"
  LIGHTSPEED_CLIENT_SECRET: "your-lightspeed-client-secret"

  # DCR (Dynamic Client Registration) Secrets
  # Initial Access Token from Red Hat SSO (Keycloak) admin
  # Required when DCR_ENABLED=true
  DCR_INITIAL_ACCESS_TOKEN: ""
  # Fernet encryption key for storing client secrets
  # Generate with: python -c 'from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())'
  DCR_ENCRYPTION_KEY: ""

  # Database Configuration
  # Marketplace PostgreSQL password (in marketplace-handler pod)
  MARKETPLACE_DB_PASSWORD: "insights"
  # Session PostgreSQL password (in lightspeed-agent pod)
  SESSION_DB_PASSWORD: "sessions"

  # Database URLs (constructed from user/password/host/port/name)
  # Marketplace database (local) - for marketplace-handler pod (same pod as PostgreSQL)
  MARKETPLACE_DATABASE_URL: "postgresql+asyncpg://insights:insights@localhost:5432/lightspeed_agent"
  # Marketplace database (remote) - for lightspeed-agent pod (connects via network)
  DATABASE_URL: "postgresql+asyncpg://insights:insights@host.containers.internal:5432/lightspeed_agent"
  # Session database - for ADK session persistence
  # If empty or not set, uses in-memory session storage (sessions lost on restart)
  SESSION_DATABASE_URL: "postgresql+asyncpg://sessions:sessions@localhost:5433/agent_sessions"
