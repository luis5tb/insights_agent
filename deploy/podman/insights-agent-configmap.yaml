# Red Hat Insights Agent - Configuration
#
# Non-sensitive configuration values for the Insights Agent.
# Use with: podman play kube --configmap insights-agent-configmap.yaml insights-agent-pod.yaml
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: insights-agent-config
data:
  # Google AI Configuration
  GOOGLE_GENAI_USE_VERTEXAI: "FALSE"
  GOOGLE_CLOUD_LOCATION: "us-central1"
  GEMINI_MODEL: "gemini-2.5-flash"

  # Red Hat SSO Configuration
  RED_HAT_SSO_ISSUER: "https://sso.redhat.com/auth/realms/redhat-external"
  RED_HAT_SSO_REDIRECT_URI: "http://localhost:8000/auth/callback"
  RED_HAT_SSO_JWKS_URI: "https://sso.redhat.com/auth/realms/redhat-external/protocol/openid-connect/certs"

  # MCP Server Configuration (for agent)
  MCP_TRANSPORT_MODE: "http"
  MCP_SERVER_URL: "http://localhost:8080"
  MCP_READ_ONLY: "true"

  # MCP Server Configuration (for MCP server container)
  MCP_SERVER_MODE: "http"
  MCP_SERVER_PORT: "8080"
  MCP_SERVER_HOST: "0.0.0.0"

  # Agent Configuration
  AGENT_PROVIDER_URL: "http://localhost:8000"
  AGENT_NAME: "insights_agent"
  AGENT_DESCRIPTION: "Red Hat Insights Agent for infrastructure management"
  AGENT_HOST: "0.0.0.0"
  AGENT_PORT: "8000"

  # Database Configuration (uses postgres container in same pod)
  DATABASE_URL: "postgresql+asyncpg://insights:insights@localhost:5432/insights_agent"

  # Redis Configuration (uses redis container in same pod)
  REDIS_URL: "redis://localhost:6379/0"

  # Logging
  LOG_LEVEL: "DEBUG"
  LOG_FORMAT: "json"

  # Development Settings
  DEBUG: "true"
  SKIP_JWT_VALIDATION: "true"

  # OpenTelemetry Configuration
  # Set OTEL_ENABLED to "true" to enable distributed tracing
  OTEL_ENABLED: "false"
  OTEL_SERVICE_NAME: "insights_agent"
  OTEL_EXPORTER_TYPE: "otlp"
  OTEL_EXPORTER_OTLP_ENDPOINT: "http://localhost:4317"
  OTEL_EXPORTER_OTLP_HTTP_ENDPOINT: "http://localhost:4318"
  OTEL_TRACES_SAMPLER: "always_on"
  OTEL_TRACES_SAMPLER_ARG: "1.0"
